#!/usr/bin/env bash
#
#
# Copyright 2019, TAQTIQA LLC
#
# All rights reserved - Do Not Redistribute
#
# Generated by Chef Cookbook developer.chef
# Local modifications will be overridden

# A better class of script...
if [[ ${DEBUG-} =~ ^1|y|yes|true$ ]]; then
  set -o xtrace       # Trace the execution of the script (debug)
fi

set -o errexit          # Exit on most errors (see the manual)
set -o errtrace         # Make sure any error trap is inherited
set -o nounset          # Disallow expansion of unset variables
set -o pipefail         # Use last non-zero exit code in a pipeline

if [ -f lefthook.yml ]
then
  lefthook run pre-commit
fi

# # pre-commit.sh
# STASH_NAME="pre-commit-$(date +%s)"
# git stash save -q --keep-index $STASH_NAME

# # Test prospective commit
# ./run_tests.sh
# RESULT=$?
# git stash pop -q
# if [ $RESULT -ne 0 ] 
# then
#   echo "ERROR: test suite threw errors:" >&2
#   echo "ERROR: " >&2
#   echo "ERROR: ${WORDS}" >&2
#   echo "ERROR: " >&2
#   echo "ERROR: Correct the message or skip this warning with:" >&2
#   echo "ERROR:   git commit --no-verify -m \"${MSG}\"" >&2
#   exit 1
# fi

# FILES_PATTERN='\.(js|coffee)(\..+)?$'
# FORBIDDEN='console.log'
# git diff --cached --name-only | \
#     grep -E $FILES_PATTERN | \
#     GREP_COLOR='4;5;37;41' xargs grep --color --with-filename -n $FORBIDDEN && echo 'COMMIT REJECTED Found "$FORBIDDEN" references. Please remove them before commiting' && exit 1

# STASHES=$(git stash list)
# if [[ $STASHES == "$STASH_NAME" ]]; then
#   git stash pop -q
# fi
